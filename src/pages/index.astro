---
import StartLayout from "../layouts/StartLayout.astro";

if (Astro.request.method === "POST") {
    try {
        const data = await Astro.request.formData();
        const searchQuery = data.get("search");
        return Astro.redirect(`/results?q=${searchQuery}`);
    } catch (error) {
        if (error instanceof Error) {
            console.error(error.message);
        }
    }
}
---

<StartLayout>
    <main>
        <header>
            <h1>Matrix Spec Changes</h1>
        </header>
        <form method="POST">
            <div id="search">
                <input type="search" name="search" required />
                <button type="submit">
                    <svg
                        id="search-icon"
                        width="48"
                        height="48"
                        viewBox="0 0 48 48"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <g clip-path="url(#clip0_2_39)">
                            <path
                                d="M31 28H29.42L28.86 27.46C30.82 25.18 32 22.22 32 19C32 11.82 26.18 6 19 6C11.82 6 6 11.82 6 19C6 26.18 11.82 32 19 32C22.22 32 25.18 30.82 27.46 28.86L28 29.42V31L38 40.98L40.98 38L31 28ZM19 28C14.02 28 10 23.98 10 19C10 14.02 14.02 10 19 10C23.98 10 28 14.02 28 19C28 23.98 23.98 28 19 28Z"
                                fill="#334155"></path>
                        </g>
                        <defs>
                            <clipPath id="clip0_2_39">
                                <rect width="48" height="48" fill="white"
                                ></rect>
                            </clipPath>
                        </defs>
                    </svg>
                </button>
            </div>
        </form>
    </main>
</StartLayout>

<style>
    main {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: var(--spacing-12, 48px);
        height: 100%;

        form {
            width: unset;
            height: unset;
        }

        header {
            color: #fff;
            text-align: center;
            font-size: 60px;
            font-style: normal;
            font-weight: 700;
        }

        #search {
            width: 820px;
            height: 100px;
            display: flex;
            border-radius: var(--border-radius-lg, 8px);
            border: 2px solid var(--colors-slate-400, #94a3b8);
            background: var(--colors-neutral-100, #f5f5f5);
            padding-left: var(--spacing-2, 8px);

            /* shadow/lg */
            box-shadow:
                0px 4px 6px -2px rgba(0, 0, 0, 0.05),
                0px 10px 15px -3px rgba(0, 0, 0, 0.1);

            align-items: center;

            input[type="search"] {
                width: 100%;
                height: 100%;
                background: var(--colors-neutral-100, #f5f5f5);

                color: #000;
                font-size: 24px;
                font-style: normal;
                font-weight: 400;
            }

            #search-icon {
                margin-right: var(--spacing-2, 8px);
                margin-left: var(--spacing-2, 8px);
                min-width: 48px;
                height: 48px;
                vertical-align: middle;
            }
        }
    }
</style>
